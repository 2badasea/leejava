<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.bada.leejava.banner.BannerMapper">
	
		<insert id="bannerInsert" parameterType="co.bada.leejava.banner.BannerVO">
			INSERT INTO BANNERIMAGE VALUES(
				( SELECT NVL(MAX(banno)+1, 1) FROM BANNERIMAGE),
				#{m_email},
				#{banfile},
				#{banpfile},
				#{banapplytitle},
				#{banapplycontent},
				SYSDATE,
				#{banapplytype},
				'',
				'',
				'WAITING'			
				)
		</insert>
		
		<!-- 회원별롯 신청한 배너문의 리스트 출력  -->
		<select id="bannerimageSelect" resultType="co.bada.leejava.banner.BannerVO">
			SELECT * FROM BANNERIMAGE
				WHERE M_EMAIL = #{m_email}
		</select>
		
		<!-- 사용자뷰, 배너 신청 현황 조회 -->
		<select id="bannerApplySelect" resultType="co.bada.leejava.banner.BannerVO">
			SELECT * FROM	BANNERIMAGE 
				WHERE BANNO = #{banno}
		</select>
		
		<!-- 페이징 처리를 위한 데이터 건수 조회 -->
		<select id="getListCnt" resultType="int">
			SELECT COUNT(*) FROM BANNERIMAGE
		</select>
		
		<!-- 실질적으로 화면에 출력시킬 페이지 출력 쿼리문 -->
		<select id="bannerApplyList" resultType="co.bada.leejava.banner.BannerVO">
			SELECT * FROM (
			    SELECT ROWNUM RN, A.* FROM (
			    	SELECT * FROM BANNERIMAGE
			        )   A
			) WHERE RN BETWEEN  #{start} AND #{end}
		</select>
	
	
</mapper>